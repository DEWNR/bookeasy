function loadBookEasyDetails(){"undefined"!=typeof operatorIDs&&"undefined"!=typeof operatorPageType&&operatorIDs.length&&($("html").hasClass("backgroundsize")&&"false"!=readCookie("responsive")&&"small"==screenSize&&$(document).ready(function(){$("body").bind("DOMNodeInserted",function(o){var a=o.target;"wdOverlayContent"==$(a).attr("id")&&($("#container").hide(),$("body").css("background-color","white"))}),$("body").bind("DOMNodeRemoved",function(o){var a=o.target;"wdOverlayContent"==$(a).attr("id")&&($("#container").show(),$("body").css("background-color",""))})}),selectedOperatorID&&(detailsGadgetOptions.productID=selectedOperatorID),"camping"!=operatorPageType&&"tours"!=operatorPageType||$("html").hasClass("touch")||(detailsGadgetOptions.descriptionHover=!0),detailsGadgetOptions.productID&&acceptBookings&&!unsupportedBrowser?$w(function(){BE.gadget.details("#operatorDetails",detailsGadgetOptions)}):unsupportedBrowser&&$("#operatorDetails").html('<div class=" closure-announcement full"><h2>Error</h2><p>Unfortunately the browser you are using is too old to run our booking system. Please <a href="mailto:DEWNR.OnlineBookings@sa.gov.au">email us</a> to make your booking, or <a href="http://whatbrowser.org/">choose a different browser</a>.</p></div>'),$.ajax({url:"//sjp.impartmedia.com/be/getOperatorsInformation?q=188&operators="+operatorIDString,cache:!0,dataType:"jsonp",jsonpCallback:"jQueryOperatorsInformation"}).done(function(o){bookeasyData.Operators=o.Operators,bookeasyData.Operators.length>0&&loadOperatorDetails(selectedOperatorID)}),"accommodation"==operatorPageType||"camping"==operatorPageType?($(".room, .campground").html("<em>Loading more information&hellip;</em>"),$.ajax({url:"//sjp.impartmedia.com/be/getAccomRoomsDetails?q=188&operators="+operatorIDString,cache:!0,dataType:"jsonp",jsonpCallback:"jQueryAccomRoomsDetails"}).always(function(){$(".room, .campground").html(""),"camping"==operatorPageType&&$(".room, .campground").hide()}).done(function(o){bookeasyData.Accommodation=o,bookeasyData.Accommodation=groupByOperator(bookeasyData.Accommodation,"Rooms","RoomID");for(var a in bookeasyData.Accommodation){var e=bookeasyData.Accommodation[a].OperatorId;for(var t in bookeasyData.Accommodation[a].Rooms)if("accommodation"==operatorPageType){if(bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("RoomID")){var r="";bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("Description")&&(r+=text2HTML(bookeasyData.Accommodation[a].Rooms[t].Description)),bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("RoomConfig")&&bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("NoPersons")&&(r+=bookeasyData.Accommodation[a].Rooms[t].RoomConfig+", sleeps "+bookeasyData.Accommodation[a].Rooms[t].NoPersons+"."),$(".room.id"+bookeasyData.Accommodation[a].Rooms[t].RoomID).html(r)}}else if("camping"==operatorPageType&&bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("RoomID")&&bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("Description")&&bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("Name")&&""!=bookeasyData.Accommodation[a].Rooms[t].Description){var r="<h3>"+bookeasyData.Accommodation[a].Rooms[t].Name+"</h3>";bookeasyData.Accommodation[a].Rooms[t].hasOwnProperty("Pictures")&&bookeasyData.Accommodation[a].Rooms[t].Pictures.length&&(r+='<img class="campsite" alt="'+bookeasyData.Accommodation[a].Rooms[t].Name+'" src="'+bookeasyData.Accommodation[a].Rooms[t].Pictures[0]+'" />'),r+='<div class="campsite">'+text2HTML(bookeasyData.Accommodation[a].Rooms[t].Description),acceptBookings&&(r+='<p><a href="#bookings" onclick="resetGadget('+e+')">Book now</a>.</p>'),r+="</div><hr />",$(".campground.id"+e).append(r)}""!=$(".campground.id"+e).html()&&"camping"==operatorPageType&&($(".campground.id"+e).before('<p><a class="concertina id'+e+'" href="#"><a class="id'+e+'" href="#">Campground details</a></p>'),$(".campground.id"+e).prepend("<hr />"),setMenuToggle(".campground.id"+e,"a.id"+e))}})):"tours"==operatorPageType&&($(".tour").html("<em>Loading more information&hellip;</em>"),$.ajax({url:"//sjp.impartmedia.com/be/getToursOperatorTourDetails?q=188&operators="+operatorIDString,cache:!0,dataType:"jsonp",jsonpCallback:"jQueryToursOperatorToursDetails"}).always(function(){$(".tour").html("").hide()}).done(function(o){bookeasyData.Tours=o.Operators;for(var a in bookeasyData.Tours){var e=bookeasyData.Tours[a].OperatorId;for(var t in bookeasyData.Tours[a].Tours)if(bookeasyData.Tours[a].Tours[t].hasOwnProperty("TourId")&&bookeasyData.Tours[a].Tours[t].hasOwnProperty("Description")&&bookeasyData.Tours[a].Tours[t].hasOwnProperty("Name")&&""!=bookeasyData.Tours[a].Tours[t].Description){var r="<h3>"+bookeasyData.Tours[a].Tours[t].Name+"</h3>";r+=text2HTML(bookeasyData.Tours[a].Tours[t].Description)+"<hr />",$(".tour.id"+e).append(r)}""!=$(".tour.id"+e).html()&&($(".tour.id"+e).before('<p><a class="concertina id'+e+'" href="#"><a class="id'+e+'" href="#">Details</a></p>'),$(".tour.id"+e).prepend("<hr />"),setMenuToggle(".tour.id"+e,"a.id"+e))}})))}function loadOperatorDetails(o){var a=null;o||(o=operatorIDs);for(var e in bookeasyData.Operators)bookeasyData.Operators[e].OperatorID==o&&(a=e);if(a){if("undefined"!=typeof bookeasyData.Operators[a].Directions){var t=bookeasyData.Operators[a].Directions.trim();t&&" "!=t?(t="<h2>Directions</h2>"+text2HTML(t),$("#operatorDirections").html(t)):$("#operatorDirections").empty()}else $("#operatorDirections").empty();if("undefined"!=typeof bookeasyData.Operators[a].Cancellation){var t=bookeasyData.Operators[a].Cancellation.trim();t&&" "!=t?(t="<h2>Terms and Conditions</h2>"+text2HTML(t),$("#operatorConditions").html(t)):$("#operatorConditions").empty()}else $("#operatorConditions").empty()}else $("#operatorDirections").empty(),$("#operatorConditions").empty();if(bookeasyData.Operators.length>1){for(var t="",r=0,s=operatorIDs.length;s>r;r++){var n=operatorIDs[r],i="";if("undefined"!=typeof operatorTitles&&operatorTitles.hasOwnProperty(n)&&(i=operatorTitles[n]),""===i)for(var e in bookeasyData.Operators)bookeasyData.Operators[e].OperatorID==n&&(i=bookeasyData.Operators[e].TradingName,"camping"==operatorPageType&&(i=i.replace(" Campground","")));""!==i&&(t+=n==o?"<span>"+i+"</span>":'<a href="#/'+bookeasyType+"/"+n+'" onclick="resetGadget('+n+')">'+i+"</a>")}t='<div class="tabs-group">'+t+"</div>",$("div.BE.details-gadget").prepend(t)}}function groupByOperator(o,a,e){for(var t,r={},s={},n=[],i=0,p=o.length;p>i;i++)r=o[i],r.hasOwnProperty("OperatorId")&&(t=r.OperatorId,s.hasOwnProperty(t)||(s[t]={OperatorId:t},s[t][a]=[]),s[t][a]=s[t][a].concat(r[a]));for(var c in s)s.hasOwnProperty(c)&&(r=s[c],r[a].sort(function(o,a){return o[e]>a[e]?1:a[e]>o[e]?-1:0}),n.push(r));return n}function getSelectedOperatorID(){if(selectedOperatorID=window.location.hash.match(/\/[a-zA-Z]{5}\/(\d{5})/))selectedOperatorID=parseInt(selectedOperatorID[1]);else{if(!(operatorIDs.length>=1))return;selectedOperatorID=operatorIDs[0]}}function resetGadget(o){unsupportedBrowser||(o?window.location.hash="/"+bookeasyType+"/"+o:getSelectedOperatorID(),detailsGadgetOptions.productID!=o&&(detailsGadgetOptions.productID=o,$("#operatorDetails").empty(),BE.gadget.details("#operatorDetails",detailsGadgetOptions),loadOperatorDetails(o)))}function text2HTML(o){return o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\//g,"/"),o=o.replace(/\r/g,"").replace(/\n( )*?(\n)*?( )*?$/,"").replace(/\n( )*?\n/g,"</p><p>").replace(/\n/g,"<br />"),o="<p>"+o+"</p>"}var readCookie,screenSize,operatorIDs,operatorPageType,operatorTitles,acceptBookings,unsupportedBrowser,detailsGadgetOptions,selectedOperatorID,bookingDate,bookeasyData={},operatorIDString=operatorIDs.join(),bookeasyType;switch(operatorPageType){case"tours":bookeasyType="tours";break;default:bookeasyType="accom"}bookingDate=new Date,detailsGadgetOptions={vcID:188,defaultDate:bookingDate,descriptionHover:!1,period:1,showQuantity:!1,thumbsInGrid:!1,type:bookeasyType},getSelectedOperatorID(),loadBookEasyDetails();