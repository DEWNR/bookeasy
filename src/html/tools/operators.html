{% raw %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>

        <link rel='stylesheet prefetch' href='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
        <link rel='stylesheet prefetch' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'>

        <style>
            body {
                 padding: 40px;
            }
            tbody tr:hover,
            tbody tr:hover td {
                background: #ffcc78!important;
            }
            tr.selected {
                background: #ffcc38!important;
            }
        </style>
    </head>
    <body>
        <div class="container" ng-app="sortApp" ng-controller="mainController">

          <div class="alert alert-info">
            <p>Sort Type: {{ sortType }}</p>
            <p>Sort Reverse: {{ sortReverse }}</p>
            <p>Search Query: {{ searchOperators }}</p>
          </div>

          <form>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-search"></i></div>
                <input type="text" class="form-control" placeholder="Filter operators" ng-model="searchOperators">
              </div>
            </div>
          </form>

          <table class="table table-bordered table-striped">

            <thead>
              <tr>
                <td>
                  <a href="#" ng-click="sortType = 'operatorID'; sortReverse = !sortReverse">
                    Operator ID
                    <span ng-show="sortType == 'operatorID' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'operatorID' && sortReverse" class="fa fa-caret-up"></span>
                  </a>
                </td>
                <td>
                  <a href="#" ng-click="sortType = 'tradingName'; sortReverse = !sortReverse">
                  Trading Name
                    <span ng-show="sortType == 'tradingName' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'tradingName' && sortReverse" class="fa fa-caret-up"></span>
                  </a>
                </td>
                <td>
                  <a href="#" ng-click="sortType = 'vcLocations'; sortReverse = !sortReverse">
                  VCLocations
                    <span ng-show="sortType == 'vcLocations' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'vcLocations' && sortReverse" class="fa fa-caret-up"></span>
                  </a>
                </td>
                <td>
                  <a href="#" ng-click="sortType = 'location'; sortReverse = !sortReverse">
                  Location
                    <span ng-show="sortType == 'location' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'location' && sortReverse" class="fa fa-caret-up"></span>
                  </a>
                </td>
                <td>
                  Type1
                </td>
                <td>
                  isMothership
                </td>
                <td>
                  details
                </td>
              </tr>
            </thead>

            <tbody>
              <tr ng-repeat="operator in operators | orderBy:sortType:sortReverse | filter:searchOperators">
                <td>{{ operator.operatorID }}</td>
                <td>{{ operator.tradingName }}</td>
                <td>{{ operator.vcLocations }}</td>
                <td>{{ operator.location }}</td>
                <td>{{ operator.type1 }}</td>
                <td>{{ operator.isMothership }}</td>
                <td><a href="details.html#/{{ operator.type1 | limitTo: 5 | lowercase }}/{{ operator.operatorID }}" target="_blank">visit</a></td>
              </tr>
            </tbody>

          </table>

        </div>

        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
        <script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js'></script>


        <script>

            var module = angular.module('sortApp', []);

            module.controller('mainController', function($scope, $http) {
                $scope.sortType     = 'operatorID';   // set the default sort type
                $scope.sortReverse  = false;          // set the default sort order
                $scope.searchOperators   = '';        // set the default search/filter term
                $scope.operators = [];

                $http.get('/data/operatorData.json')
                    .success(function(data) {

                        var operators = data;

                        var aTemp = [];

                        for (var key in operators) {
                            var sLocations = '';

                            console.log(operators[key]);

                            if(typeof operators[key]['Locations'] !== 'undefined') {

                                if (Object.keys(operators[key]['Locations']).length) {
                                    sLocations = operators[key]['Locations'][0]['Description'];
                                }

                            }

                            aTemp.push({
                                operatorID: operators[key]['OperatorID'],
                                tradingName: operators[key]['TradingName'],
                                vcLocations: sLocations,
                                location: operators[key]['Location'],
                                type1: operators[key]['type'],
                                isMothership: operators[key]['IsMothership']
                            });

                        }

                        console.log(aTemp);
                        $scope.operators = aTemp;

                    })
                    .error(function(error) {
                    });
            });
        </script>
    </body>
</html>
{% endraw %}
