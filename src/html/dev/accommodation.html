<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>

        <style>
            .jsonview{font-family:monospace;font-size:1.1em;white-space:pre-wrap}.jsonview .prop{font-weight:700;text-decoration:none;color:#000}.jsonview .null,.jsonview .undefined{color:red}.jsonview .bool,.jsonview .num{color:#00f}.jsonview .string{color:green;white-space:pre-wrap}.jsonview .string.multiline{display:inline-block;vertical-align:text-top}.jsonview .collapser{position:absolute;left:-1em;cursor:pointer}.jsonview .collapsible{transition:height 1.2s;transition:width 1.2s}.jsonview .collapsible.collapsed{height:.8em;width:1em;display:inline-block;overflow:hidden;margin:0}.jsonview .collapsible.collapsed:before{content:"â€¦";width:1em;margin-left:.2em}.jsonview .collapser.collapsed{transform:rotate(0)}.jsonview .q{display:inline-block;width:0;color:transparent}.jsonview li{position:relative}.jsonview ul{list-style:none;margin:0 0 0 2em;padding:0}.jsonview h1{font-size:1.2em}
        </style>

    </head>
    <body>

        <table class="operator-data">
            <thead>
                <tr>
                    <th>OperatorID</th>
                    <th>ResidentialAddress</th>
                    <th>TradingName</th>
                    <th>Locations</th>
                    <th>location</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
        <script src="//gadgets.impartmedia.com/gadgets.jsz?key=d5192d41822d0c987a0610af120d29bf"></script>

        <script>

            var aOperators = [];


            $.ajax({
                url: "http://sjp.impartmedia.com/be/getOperatorsInformation",

                // The name of the callback parameter, as specified by the YQL service
                jsonp: "callback",

                // Tell jQuery we're expecting JSONP
                dataType: "jsonp",

                // Tell YQL what we want and that we want JSON
                data: {
                    q: 188
                },

                // Work with the response
                success: function( response ) {

                    var operators = response.Operators;
                    for (var key in operators) {
                        var sLocations = "";

                        if (Object.keys(operators[key]['Locations']).length) {
                            sLocations = operators[key]['Locations'][0]['Description'];
                        }

                        $('.operator-data tbody').append('<tr><td>'+ operators[key]['OperatorID'] +'</td><td>'+ operators[key]['ResidentialAddress'] +'</td><td>'+ operators[key]['TradingName'] +'</td><td>' + sLocations + '</td><td>' + operators[key]['Location'] + '</td></tr>');

                    }
                }
            });

        </script>

    </body>
</html>
