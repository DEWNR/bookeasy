
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>

        <style>
            div.embedded-search div.search-gadget.BE div.product,
            div.search-gadget.BE div.refineTools> div.locationFilter,
            div.search-gadget.BE div.refineTools> div.facilities {
                /*display: none!important;*/
            }
        </style>
    </head>
    <body>

        <div class="park-selector">
            <select class="park-selector__select"></select>

            <a class="park-selector__buton" href="#">Submit</a>
        </div>

        <div class="bookeasy__refine-tools"></div>

        <div class="bookeasy__region-gadget"></div>


        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

        <script src="//gadgets.impartmedia.com/gadgets.jsz?key=7e5893292834eb2b34cd1d9b11437df9"></script>

        <script>

            // TODO: parks data will be imported via DLV in json format
            var parksData = {
                    "locations" :{
                        "0" : "ALL",
                        "1" : "Beachport Conservation Park",
                        "2" : "Bool Lagoon Game Reserve",
                        "3" : "Canunda National Park",
                        "4" : "Coorong National Park",
                        "5" : "Deep Creek Conservation Park",
                        "6" : "Dutchmans Stern Conservation Park",
                        // "7" : "Flinders Chase National Park",
                        "8" : "Innes National Park",
                        "9" : "Little Dip Conservation Park",
                        "10" : "Mount Remarkable National Park",
                        // "11" : "Tallaringa Conservation Park",
                        // "12" : "Vulkathunha-Gammon ranges National Park"
                    }
                };


                // get the url hash (removes '#/')
                var urlHash = location.hash.replace(/^#\//, '');

                // populate park selector
                $.each(parksData.locations, function(key, value) {

                    // append the option and check if currently selected
                     $('.park-selector__select').append($('<option></option').attr('value', value).attr('selected', urlHash == value ? true : false).text(value));

                });


                // on change update buttons href
                $('.park-selector__select').on('change', function(event) {

                    // update href
                    $('.park-selector__buton').attr('href', '' + $(this).val());
                });


                // reload page to show correct bookeasy gadget
                $('.park-selector__buton').on('click', function(event) {

                        var value = $(this).attr('href');

                        $('.locationFilter option[value="' + value + '"]').attr('selected', true).trigger('change').trigger('click');


                    event.preventDefault();
                });


            // bookeasy
            $w(function() {

                var bookingDate = new Date();

                bookingDate.setDate(bookingDate.getDate() + 1);

                // load region gadget
                BE.gadget.region('.bookeasy__region-gadget',{
                    accomOnlyMode:          false, // current site config
                    advancedPriceView:      null,
                    applyBoundsAlgorithm:   true,
                    campaignID:             null,
                    collapseRefineTools:    false,  // current site config
                    customMapIcons: {
                        'accom': {
                            icon: '//www.environment.sa.gov.au/files/templates/00000000-0000-0000-0000-000000000000/c16a6c2a-2cdc-4f08-96b9-f1c11eb6f349/npsa-marker-general.png',
                            pinpoint: [13,45],
                            size: [26,45]
                        }
                    },

                    defaultSort:            'name', // current site config
                    defaultRegionLoc:       null,
                    defaultRegionRegion:    null,
                    defaultRegionState: 'South Australia',
                    disabledTypes:          ['tours', 'events','carhire','packages'],
                    embedSearch:            true,
                    enableRegionSearch:     false, // current site config
                    forceAccomType:         '', // current site config
                    forceTourType:          null,
                    forceDefaultTypes:      null,
                    forceMapBounds:         null,
                    forceRegionLoc:         null,
                    forceRegionRegion:      null,
                    forceRegionState:       null,
                    hideCategories:         null,
                    ignoreSearchCookie:     true, // current site config
                    interactiveMapMode:     false,
                    interactiveMapUser:     false,
                    itemDetailPageURL:      './detail.html',
                    lastMinuteMode:         null,
                    limitLocations:         ['Dutchmans Stern Conservation Park','Mount Remarkable National Park','Innes National Park','Deep Creek Conservation Park,Bool Lagoon Game Reserve','Beachport Conservation Park','Canunda National Park','Little Dip Conservation Park','Coorong National Park'],
                    listAllMode:            false,
                    noAdults:               45,
                    noChildren:             45,
                    noInfants:              45,
                    noConcessions:          45,
                    noStudents:             45,
                    noObservers:            45,
                    noFamily:               10,
                    // refineToolsLocation:    '.bookeasy__refine-tools',
                    showAccomTypeFilter:    false,
                    showAllAccom:           true, // current site config
                    showAllLocationsForOperator: false,
                    showAllTours:           false,
                    showAllEvents:          false,
                    showLegend:             false,
                    showList:               false, // current site config
                    showLocationFilter:     true, // current site config
                    showRoomDetails:        false,
                    showMap:                true,
                    showRefineTools:        true,
                    specificTypes:          null,
                    thumbsInGrid:           true,
                    toursOnlyMode:          false,
                    treatPrimaryTypeAsCategory: false,
                    vcID:                   188, // current site config
                    vcLocations:            null,
                    bookingStatus:          null,

                    // search gadget settings
                    defaultDate: bookingDate, // current site config
                    period: 1, // current site config
                    adults: 1 // current site config
                });

            });

        </script>
    </body>
</html>
